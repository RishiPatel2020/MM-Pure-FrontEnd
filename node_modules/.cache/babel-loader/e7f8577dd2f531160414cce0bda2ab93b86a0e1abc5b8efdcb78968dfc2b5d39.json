{"ast":null,"code":"import _slicedToArray from\"/Users/rishipatel/Documents/Coding/WebDevelopment/FullStackProjects/TiffinService/MM-backend/MM_Backend/MM-Backend/pureFrontEnd/FrontendOnly/MM-Pure-FrontEnd/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{useEffect}from\"react\";import{Button}from\"react-bootstrap\";import React from\"react\";import Table from\"react-bootstrap/Table\";import userSession from\"../../Service/userSession\";import OrderAPIService from\"../../Service/OrderAPIService\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var OrderHistory=function OrderHistory(_ref){var isLoggedIn=_ref.isLoggedIn;var navigate=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];useEffect(function(){if(!isLoggedIn){navigate(\"/\");}else{document.title=\"History\";var fetchHistory=function fetchHistory(){console.log(\"SERVICE CALLED....\");OrderAPIService.orderHistory({id:userSession.getUser().id}).then(function(response){if(response.status==200){setOrders(response.data);}else{setOrders(null);}}).catch(function(err){console.log(err);setOrders(null);});};!orders&&fetchHistory();}},[]);var toHomePage=function toHomePage(){navigate(\"/\");};var noHistory=function noHistory(){return/*#__PURE__*/_jsx(\"section\",{className:\"md-primary\",style:{fontFamily:\"Signika\",padding:\"64px 32px\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"container text-center\",style:{marginRight:\"auto\",marginBottom:\"340px\",marginLeft:\"auto\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"40px\"},children:[/*#__PURE__*/_jsx(\"img\",{className:\"img-fluid\",src:require(\"../../Resources/Vector/noHistory.png\"),style:{height:\"60%\",width:\"50%\"}}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"\"},children:[/*#__PURE__*/_jsx(\"p\",{className:\"\",style:{fontSize:\"2.5vw\",marginTop:\"8.5vh\",marginBottom:\"6.5vh\"},children:\"Uh-Oh! Looks like you don't have any orders yet! Try our meals now!\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-100 d-flex align-items-center justify-content-center\",children:/*#__PURE__*/_jsx(Link,{to:\"/order\",children:/*#__PURE__*/_jsx(Button,{variant:\"secondary\",className:\"text-primary\",style:{height:\"50px\",width:\"150px\",borderRadius:\"25px\",fontSize:\"25px\"},children:\"Order\"})})})]})]})})});};var history=function history(){return/*#__PURE__*/_jsxs(\"section\",{className:\"bg-primary\",style:{fontFamily:\"Signika\",padding:\"20% 32px\"},children:[/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,style:{fontSize:\"calc(16px+1vw)\"},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Meal Size\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Types of Meals\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date Ordered\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delivery Date\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(function(order){var OrderId=order.OrderId,deliveryDate=order.deliveryDate,totalPrice=order.totalPrice,mealSize=order.mealSize,orderDate=order.orderDate,meals=order.meals;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:mealSize}),/*#__PURE__*/_jsx(\"td\",{children:meals.map(function(meal){return/*#__PURE__*/_jsxs(\"span\",{children:[meal.name,/*#__PURE__*/_jsx(\"br\",{})]});})}),/*#__PURE__*/_jsx(\"td\",{children:totalPrice}),/*#__PURE__*/_jsx(\"td\",{children:orderDate}),/*#__PURE__*/_jsx(\"td\",{children:deliveryDate})]});})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:\"If you would like to cancel your order, please email support@mirchimeals.com before 3pm the prior day of delivery.\"})]});};var viewOrderHistoryPage=function viewOrderHistoryPage(){// fetchOrders();\nif(orders){if(orders.length===0){return noHistory();}else{return history();}}else{return/*#__PURE__*/_jsx(\"div\",{children:\"Loading... \"});}};return/*#__PURE__*/_jsx(_Fragment,{children:isLoggedIn?viewOrderHistoryPage():toHomePage()});};export default OrderHistory;","map":{"version":3,"names":["useState","Link","useNavigate","useEffect","Button","React","Table","userSession","OrderAPIService","OrderHistory","isLoggedIn","navigate","orders","setOrders","document","title","fetchHistory","console","log","orderHistory","id","getUser","then","response","status","data","catch","err","toHomePage","noHistory","fontFamily","padding","marginRight","marginBottom","marginLeft","marginTop","require","height","width","fontSize","borderRadius","history","map","order","OrderId","deliveryDate","totalPrice","mealSize","orderDate","meals","meal","name","viewOrderHistoryPage","length"],"sources":["/Users/rishipatel/Documents/Coding/WebDevelopment/FullStackProjects/TiffinService/MM-backend/MM_Backend/MM-Backend/pureFrontEnd/FrontendOnly/MM-Pure-FrontEnd/src/components/OrderHistory/OrderHistory.js"],"sourcesContent":["import { useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useEffect } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport React from \"react\";\nimport Table from \"react-bootstrap/Table\";\nimport userSession from \"../../Service/userSession\";\nimport OrderAPIService from \"../../Service/OrderAPIService\";\n\nconst OrderHistory = ({ isLoggedIn }) => {\n  const navigate = useNavigate();\n  const [orders, setOrders] = useState(null);\n\n  useEffect(() => {\n    if (!isLoggedIn) {\n      navigate(\"/\");\n    } else {\n      document.title = \"History\";\n      const fetchHistory = () => {\n        console.log(\"SERVICE CALLED....\");\n        OrderAPIService.orderHistory({ id: userSession.getUser().id })\n          .then((response) => {\n            if (response.status == 200) {\n              setOrders(response.data);\n            } else {\n              setOrders(null);\n            }\n          })\n          .catch((err) => {\n            console.log(err);\n            setOrders(null);\n          });\n      };\n      !orders && fetchHistory();\n    }\n  }, []);\n\n  const toHomePage = () => {\n    navigate(\"/\");\n  };\n  const noHistory = () => {\n    return (\n      <section\n        className=\"md-primary\"\n        style={{ fontFamily: \"Signika\", padding: \"64px 32px\" }}\n      >\n        <div\n          className=\"container text-center\"\n          style={{\n            marginRight: \"auto\",\n            marginBottom: \"340px\",\n            marginLeft: \"auto\",\n          }}\n        >\n          <div style={{ marginTop: \"40px\" }}>\n            {/* Image */}\n            <img\n              className=\"img-fluid\"\n              src={require(\"../../Resources/Vector/noHistory.png\")}\n              style={{ height: \"60%\", width: \"50%\" }}\n            />\n            {/* Help Text */}\n            <div style={{ marginTop: \"\" }}>\n              <p\n                className=\"\"\n                style={{\n                  fontSize: \"2.5vw\",\n                  marginTop: \"8.5vh\",\n                  marginBottom: \"6.5vh\",\n                }}\n              >\n                Uh-Oh! Looks like you don't have any orders yet! Try our meals\n                now!\n              </p>\n\n              {/* Order Button */}\n              <div className=\"h-100 d-flex align-items-center justify-content-center\">\n                <Link to=\"/order\">\n                  <Button\n                    variant=\"secondary\"\n                    className=\"text-primary\"\n                    style={{\n                      height: \"50px\",\n                      width: \"150px\",\n                      borderRadius: \"25px\",\n                      fontSize: \"25px\",\n                    }}\n                  >\n                    Order\n                  </Button>\n                </Link>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n    );\n  };\n\n  const history = () => {\n    return (\n      <section\n        className=\"bg-primary\"\n        style={{ fontFamily: \"Signika\", padding: \"20% 32px\" }}\n      >\n        <Table striped bordered hover style={{ fontSize: \"calc(16px+1vw)\" }}>\n          <thead>\n            <tr>\n              <th>Meal Size</th>\n              <th>Types of Meals</th>\n              <th>Price</th>\n              <th>Date Ordered</th>\n              <th>Delivery Date</th>\n            </tr>\n          </thead>\n          <tbody>\n            {orders.map((order) => {\n              const {\n                OrderId,\n                deliveryDate,\n                totalPrice,\n                mealSize,\n                orderDate,\n                meals,\n              } = order;\n              return (\n                <tr>\n                  <td>{mealSize}</td>\n                  <td>\n                    {meals.map((meal) => {\n                      return (\n                        <span>\n                          {meal.name}\n                          <br></br>\n                        </span>\n                      );\n                    })}\n                  </td>\n                  <td>{totalPrice}</td>\n                  <td>{orderDate}</td>\n                  <td>{deliveryDate}</td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </Table>\n\n        <div className=\"mt-4\">\n          If you would like to cancel your order, please email\n          support@mirchimeals.com before 3pm the prior day of delivery.\n        </div>\n      </section>\n    );\n  };\n\n  const viewOrderHistoryPage = () => {\n    // fetchOrders();\n    if (orders) {\n      if (orders.length === 0) {\n        return noHistory();\n      } else {\n        return history();\n      }\n    } else {\n      return <div>Loading... </div>;\n    }\n  };\n  return <>{isLoggedIn ? viewOrderHistoryPage() : toHomePage()}</>;\n};\n\nexport default OrderHistory;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}